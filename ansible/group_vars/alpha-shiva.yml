name: shiva

inject_ca: false
repo: git@github.com:CodeNow/astral.git
node_version: "4.2.1"
npm_version: "2.8.3"

dockerfile_enviroment: [
  "NPM_TOKEN {{ npm_token }}"
]
dockerfile_pre_install_commands: [
   'echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > .npmrc'
]

# Overrides the start command in the builder role
npm_start_command: run shiva-start

container_envs:
  - name: BIG_POPPA_HOST
    value: http://{{ big_poppa_host_address }}:{{ big_poppa_port }}
  - name: DATADOG_HOST
    valueFrom: "spec.nodeName"
  - name: DATADOG_PORT
    value: "{{ datadog_port }}"
  - name: RABBITMQ_HOSTNAME
    value: "{{ rabbit_host_address }}"
  - name: RABBITMQ_PASSWORD
    value: "{{ rabbit_password }}"
  - name: RABBITMQ_PORT
    value: "{{ rabbit_port }}"
  - name: RABBITMQ_USERNAME
    value: "{{ rabbit_username }}"
  - name: AWS_ACCESS_KEY_ID
    value: "{{ aws_access_key_id }}"
  - name: AWS_SECRET_ACCESS_KEY
    value: "{{ aws_secret_access_key }}"
  - name: NODE_ENV
    value: "{{ node_env }}"
  - name: REGISTRY_HOST
    value: "{{ registry_host }}"
  - name: ROLLBAR_KEY
    value: "{{ shiva_rollbar_token }}"
  - name: DOCKER_PORT
    value: "{{ docker_port }}"
