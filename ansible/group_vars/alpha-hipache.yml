# container_kill_start settings
name: hipache

# copy certs into docker image:
docker_client_certs: true

container_image: registry.runnable.com/runnable/hipache
container_tag: latest
hosted_ports: [ 80, 443 ]

# TODO: must bake these certs into these images
container_run_opts: >
  -d
  -p 80:80
  -p 443:443
  -v /opt/hipache-conf:/host:rw
  -v /etc/ssl/certs/{{ domain }}:/etc/ssl/certs/{{ domain }}
  -v /etc/ssl/private/{{ domain }}.key:/etc/ssl/private/{{ domain }}.key

container_run_args: /usr/local/bin/hipache --config /host/config.json

# hipache settings
retry_on_error: 0
