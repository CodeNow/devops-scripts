# container start
name: "registry"

container_image: "registry"
container_tag: "2"
hosted_ports: ["80"]

container_envs: >
  -e REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY=/registry
  -e REGISTRY_STORAGE_S3_ACCESSKEY={{ registry_s3_access_key }}
  -e REGISTRY_STORAGE_S3_SECRETKEY={{ registry_s3_secret_key }}
  -e REGISTRY_STORAGE_S3_REGION=us-east-1
  -e REGISTRY_STORAGE_S3_BUCKET={{ registry_s3_bucket }}
  -e REGISTRY_STORAGE_CACHE_BLOBDESCRIPTOR=runnableimages.beta
  -e REGISTRY_ENVIRONMENT=production
  -e REGISTRY_STORAGE=s3

container_run_opts: "-d -p {{ hosted_ports[0] }}:5000 {{container_envs}}"
