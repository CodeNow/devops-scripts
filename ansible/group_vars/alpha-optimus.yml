name: optimus
app_name: "{{ name }}"
security_groups: "{{ sg_dock_services }}"

container_image: registry.runnable.com/runnable/{{ name }}
container_tag: "{{ git_branch }}"
repo: git@github.com:CodeNow/{{ name }}.git
hosted_ports: ["{{ optimus_port }}"]
node_version: "4.3.2"
npm_version: "2.8.3"

# for redis
redis_key: frontend:{{ optimus_hostname }}
is_redis_update_required: yes

dockerfile_environment: |
  ENV NODE_ENV {{ node_env }}
  ENV DATADOG_HOST {{ datadog_host_address }}
  ENV DATADOG_PORT {{ datadog_port }}
  ENV PORT {{ hosted_ports[0] }}
  ENV AWS_ACCESS_KEY_ID {{ optimus_aws_access_id }}
  ENV AWS_SECRET_ACCESS_KEY {{ optimus_aws_secret_id }}
  ENV S3_DEPLOY_KEY_BUCKET {{ optimus_github_deploy_keys_bucket }}
  ENV ROLLBAR_KEY a49f9cce09ee46f09df3f603178fba75
  ENV LOG_LEVEL trace

container_run_opts: >
  -h {{ name }}
  -d
  -p {{ hosted_ports[0] }}:{{ hosted_ports[0] }}
