name: "agreeable-egret"

container_image: "registry.runnable.com/runnable/{{ name }}"
container_tag: "{{ git_branch }}"
hosted_ports: ["{{ agreeable_egret_port }}"]
repo: "git@github.com:CodeNow/{{ name }}.git"
node_version: "4.3.1"
npm_version: "3.7.5"

# Exposes egret
redis_key: "frontend:{{ agreeable_egret_hostname }}"
is_redis_update_required: 'yes'

# container settings
container_envs: >
  -e HELLO_RUNNABLE_GITHUB_TOKEN={{ api_hello_runnable_github_token }}
  -e NODE_ENV={{ node_env }}
  -e RUNNABLE_API_URL={{ agreeable_egret_api_url }}
  -e PORT={{ hosted_ports[0] }}
  -e RUNNABLE_USER_CONTENT_DOMAIN={{ user_content_domain }}
  -e POSTGRES_CONNECT_STRING={{ egret_postgres_connect_string }}

container_run_opts: >
  -h {{ name }}
  -d
  -p {{ hosted_ports[0] }}:{{ hosted_ports[0] }}
  {{ container_envs }}
