---
name: nginx

# copy certs into docker image:
docker_client_certs: true

# copy nginx config into docker image:
nginx_conf: true

swarm_cluster_network: "{{ env }}-backend"
swarm_service_tag: api-proxy

# used by consul template updater
proxy_service_name: api
target_container_name: nginx
target_updater_file_path: /etc/nginx/sites-enabled
template_command: /bin/docker kill -s HUP {{ target_container_name }}
template_path: /etc/nginx/template/api.tmpl

# used by container_kill_start
container_image: "{{ name }}"
container_tag: "1.10"

restart_policy: always

container_run_opts: >
  --publish 443:443/tcp
  --publish 80:80/tcp
