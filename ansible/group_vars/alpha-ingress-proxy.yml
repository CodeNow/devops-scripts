---
name: ingress-proxy

container_image: "nginx"
container_tag: "1.10"
hosted_ports: ["80", "443"]
container_run_args: ''

service_type: "LoadBalancer"

volume_mounts:
 - name: "{{ name }}-{{ domain | replace('.', '-') }}-certs"
   path: /etc/ssl/certs/{{ domain }}
   kind: configMap
 - name: "{{ name }}-base-conf"
   path: /etc/nginx/
   kind: configMap
 - name: "{{ name }}-mixpanel-config"
   path: /etc/nginx/other-sites-enabled
   kind: configMap
 - name: "{{ name }}-sites-enabled-config"
   path: /etc/nginx/sites-enabled
   kind: configMap

services:
  - name: api
    ports: ["{{ api_port }}"]
  - name: drake
    ports: ["{{ drake_port }}"]
  - name: optimus
    ports: ["{{ optimus_port }}"]
  - name: apisock
    ports: ["{{ api_port }}"]
  - name: eru
    ports: ["{{ eru_http_port }}","{{ eru_graphql_port }}"]
  - name: egret
    ports: ["{{ egret_port }}"]
