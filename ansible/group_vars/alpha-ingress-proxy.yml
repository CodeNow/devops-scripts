---
name: ingress-proxy

container_image: "nginx"
container_tag: "1.10"
hosted_ports: ["80", "443"]
container_run_args: ''

service_type: "LoadBalancer"

volume_mounts:
 - name: "{{ name }}-{{ domain | replace('.', '-') }}-certs"
   path: /etc/ssl/certs/{{ domain }}
   kind: configMap
 - name: "{{ name }}-base-conf"
   path: /etc/nginx/
   kind: configMap
 - name: "{{ name }}-mixpanel-config"
   path: /etc/nginx/other-sites-enabled
   kind: configMap
 - name: "{{ name }}-sites-enabled-config"
   path: /etc/nginx/sites-enabled
   kind: configMap

services:
  - name: api
    port: "{{ api_port }}"
  - name: drake
    port: "{{ drake_port }}"
  - name: optimus
    port: "{{ optimus_port }}"
  - name: apisock
    port: "{{ api_port }}"
  - name: eru
    port: "{{ eru_http_port }}"
  - name: egret
    port: "{{ agreeable_egret_port }}"
  - name: registry
    port: "{{ registry_port }}"
  - name: rabbitmq
    port: "15672"
  - name: consul
    port: "{{ consul_api_port }}"
  - name: vault
    port: "{{ vault_api_port }}"
