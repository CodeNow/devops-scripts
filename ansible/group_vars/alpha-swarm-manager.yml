name: "swarm-manager"

# copy certs into docker image:
docker_client_certs: true

# container_kill_start settings
container_image: registry.runnable.com/swarm
container_tag: 1.2.3-0

memory_hard_limit: 10g

container_run_opts: >
  -d
  -p {{ swarm_master_port }}:2375
  -v {{ build_dir }}/{{ name }}/ssl:/etc/ssl/docker:ro

container_run_args: >
  manage
  --tlsverify
  --tlscacert={{ docker_ca_path }}
  --tlscert={{ docker_cert_path }}
  --tlskey={{ docker_key_path }}
  consul://{{ consul_host_address }}:{{ consul_api_port }}/swarm
