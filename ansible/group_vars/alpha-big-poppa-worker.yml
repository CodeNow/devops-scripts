name: big-poppa-worker

envs:
  - name: ROLLBAR_KEY
    value: "{{ big_poppa_worker_rollbar_token }}"

container_image: "{{ registry_host }}/runnable/{{ name }}"
container_tag: "{{ git_branch }}"
repo: "git@github.com:CodeNow/big-poppa.git"
node_version: 4.4.7
npm_version: 2

container_envs: "{{ big_poppa_base_container_envs + envs }}"

dockerfile_pre_install_commands: [
  "apt-get update",
  "apt-get install postgresql-client=9.4+165+deb8u2 -y",
  "echo '//registry.npmjs.org/:_authToken=${NPM_TOKEN}' > .npmrc"
]

container_run_args: npm run start-worker

