---
- hosts: localhost
  connection: local
  tasks:
  - fail: msg="`dock` (target dock) needs to be defined to run this role"
    when: dock is not defined

  - add_host:
      name={{ dock }}
      groups=dock

- include: charon.yml git_branch="{{ charon_version }}" -t loggly,deploy
- include: dock-init.yml git_branch="{{ dock_init_version }}" -t loggly,deploy
- include: image-builder.yml git_branch="{{ image_builder_version }}" -t loggly,deploy
- include: krain.yml git_branch="{{ krain_version }}" -t loggly,deploy
