---
- hosts: localhost
  tasks:
  - fail: msg="`dock` (target dock) needs to be defined to run this role"
    when: dock is not defined
  - add_host:
      name={{ dock }}
      groups=dock

# - hosts: consul
# - hosts: mongodb
# - hosts: neo4j
# - hosts: rabbit
# - hosts: redis
# - hosts: redis-slave

# - hosts: {{ dock }}
#   vars_files:
#     - "group_vars/alpha-docks.yml"
#   roles:
#     - { role: docker, tags: "docker" }
#     - { role: iptables, tags: "iptables, security" }
#     - { role: datadog }

- include: dock-init.yml git_branch=v5.1.3
- include: krain.yml git_branch=v0.1.1
- include: filibuster.yml git_branch=v0.1.7
- include: sauron.yml git_branch=v3.1.0
- include: charon.yml git_branch=v3.0.0
# - include: image-builder.yml
