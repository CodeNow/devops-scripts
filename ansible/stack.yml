## configure security group policy
- include: sg_configure.yml
#
## Install Datadog Agent
- include: datadog.yml
#
## begin with databases:
- include: consul.yml
- include: vault.yml
#- include: mongo-navi.yml
- include: rabbitmq.yml
- include: redis.yml
#- include: redis-slave.yml
- include: registry.yml
#
## base service tier
#- include: consul-values.yml
- include: detention.yml git_branch="{{ detention_branch }}"
- include: eru.yml git_branch="{{ eru_branch }}"
- include: ingress.yml
- include: github-varnish.yml
- include: khronos.yml git_branch="{{ khronos_branch }}"
- include: link.yml git_branch="{{ link_branch }}"
- include: optimus.yml git_branch="{{ optimus_branch }}"
- include: palantiri.yml git_branch="{{ palantiri_branch }}"
- include: sauron.yml git_branch="{{ sauron_branch }}"
- include: shiva.yml git_branch="{{ astral_branch }}"
- include: swarm-manager.yml
#
## secondary services and configuration
- include: api.yml git_branch="{{ api_branch }}"
- include: navi.yml git_branch="{{ navi_branch }}"
- include: vault-values.yml -e write_values="true"
- include: consul-services.yml
- include: consul-values.yml -e write_values="true"
# run with: `--extra-vars "@current_versions.yml"`
