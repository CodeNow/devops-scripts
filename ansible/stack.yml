## configure security group policy
- include: sg_configure.yml 
#
## Install Datadog Agent
- include: datadog.yml
#
## begin with databases:
- include: consul.yml 
- include: vault.yml
#- include: mongo-navi.yml 
#- include: neo4j.yml 
- include: rabbitmq.yml 
- include: redis.yml 
#- include: redis-slave.yml 
- include: registry.yml 
#
## base service tier
#- include: consul-values.yml 
- include: detention.yml git_branch="{{ detention_branch }}" -t deploy
- include: eru.yml git_branch="{{ eru_branch }}" -t deploy
- include: hipache.yml 
- include: khronos.yml git_branch="{{ khronos_branch }}" -t deploy
- include: link.yml git_branch="{{ link_branch }}" -t deploy
- include: mavis.yml git_branch="{{ mavis_branch }}" -t deploy
- include: metis.yml git_branch="{{ metis_branch }}" -t deploy
- include: optimus.yml git_branch="{{ optimus_branch }}" -t deploy
- include: palantiri.yml git_branch="{{ palantiri_branch }}" -t deploy
- include: sauron.yml git_branch="{{ sauron_branch }}" -t deploy
- include: shiva.yml git_branch="{{ astral_branch }}" -t deploy
- include: swarm-manager.yml 
#- include: web.yml git_branch="{{ angular_branch }}" -t deploy
#
## secondary services and configuration
- include: api.yml git_branch="{{ api_branch }}" -t deploy
- include: navi.yml git_branch="{{ navi_branch }}" -t deploy
- include: vault-values.yml -e write_values="true"
- include: consul-services.yml
- include: consul-values.yml -e write_values="true"
# run with: `--extra-vars "@current_versions.yml"`
