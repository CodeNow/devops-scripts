---
- name: create runnabot repository dir
  file:
    path=/opt/runnable/runnabot
    state=directory
    owner={{ ansible_env.USER }}

- name: pull the runnabot repository
  git:
    repo=git@github.com:CodeNow/runnabot.git
    dest=/opt/runnable/runnabot
    version={{ git_branch }}
    update=yes
    accept_hostkey=yes
    depth=1
    force=yes

- name: build the hubot image
  command: sudo docker build --tag="{{ container_image }}:{{ container_tag }}" /opt/runnable/runnabot
