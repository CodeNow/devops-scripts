global:
  # ResolveTimeout is the time after which an alert is declared resolved
  # if it has not been updated.
  resolve_timeout: 5m

  slack_api_url: "{{ ops_slack_channel_url }}"

  pagerduty_url: "https://events.pagerduty.com/generic/2010-04-15/create_event.json"

# The root node of the routing tree.
route:
  # A default receiver
  receiver: slack

  continue: true

  routes:
  - match_re:
      reportTo: .*pagerduty.*
    receiver: pagerduty

  - match_re:
      reportTo: .*drake.*
    receiver: drake

# A list of notification receivers.
receivers:
- name: "pagerduty"
  pagerduty_configs:
  - send_resolved: true
    service_key: "{{ pager_duty_key }}"
  slack_configs:
  - send_resolved: true
    channel: ops

- name: "slack"
  slack_configs:
  - send_resolved: true
    channel: ops

- name: "drake"
  webhook_configs:
  - send_resolved: true
    url: "http://{{ drake_hostname }}/prometheus"
  slack_configs:
  - send_resolved: true
    channel: ops
