---
- name: create new config file for krain
  template:
    src=upstart.conf
    dest=~/{{ app_name }}.conf
    backup=yes
  vars:
    - app_name: "krain"

- name: encode krain config to base64
  shell: cat ~/{{ app_name }}.conf | base64 -w 0
  register: krain_base64
  vars:
    - app_name: "krain"

- name: create new config file for charon
  template:
    src=upstart.conf
    dest=~/{{ app_name }}.conf
    backup=yes
  vars:
    - app_name: "charon"

- name: encode krain config to base64
  shell: cat ~/{{ app_name }}.conf | base64 -w 0
  register: charon_base64
  vars:
    - app_name: "charon"

- name: Generate init script
  template:
    src=init.tmpl
    dest=~/init.sh
